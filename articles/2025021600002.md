---
title: "chatdevã‚’è§¦ã£ã¦ã¿ã‚‹ï¼ˆå¤±æ•—ä¸­ï¼‰"
emoji: "ğŸ¦†"
type: "idea"
topics:
  - "chatdev"
published: true
published_at: "2025-02-16 12:00"
---

# ãªãœä½œæˆã—ãŸã®ã‹
- é–‹ç™ºã‹ã‚‰é ãé›¢ã‚ŒãŸç«‹å ´ã«ãªã£ãŸã®ã§ã€ä»Šã©ãã®é–‹ç™ºã£ã¦ã©ã‚“ãªæ„Ÿã˜ãªã‚“ã ã‚ã€ã¨é–‹ç™ºã‚’ã‚·ãƒ çš„ã«ä¿¯ç°ã—ã¦ã¿ãŸããªã£ãŸ
- èª­ã‚“ã§ã¿ãŸã‚‰è§¦ã£ã¦ã¿ãŸããªã£ãŸ

# ä»¶ã®è«–æ–‡
https://arxiv.org/abs/2307.07924

![](/images/2025021600001/2025021601.png)

# å‚è€ƒ
https://qiita.com/sypn/items/8cf341c353cba73d8d7c
https://qiita.com/taiwa_tky/items/4ab7962f6e7354824cae

# ç’°å¢ƒæ§‹ç¯‰

## PCã‚¹ãƒšãƒƒã‚¯
- Microsoft Surface Laptop, 7th Edition
- Windows 11 Home
- python 3.11.5
- git version 2.47.1.windows.1



## ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```powershell
$ git clone https://github.com/OpenBMB/ChatDev.git
```

## ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```powershell
$ pip install -r requirements.txt
```

## ç’°å¢ƒå¤‰æ•°ã«OpenAI API ã‚­ãƒ¼ã‚’è¨­å®š

```powershell
$ $env:OPENAI_API_KEY="your_OpenAI_API_key"
```

# ç™ºæ³¨æŒ‡ç¤º

## ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã‚¢ãƒ—ãƒªã®ç”Ÿæˆã‚’ç™ºæ³¨
- **description_of_your_idea**:
  - ä½œæˆã—ã¦ã»ã—ã„ã‚¢ãƒ—ãƒªã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è‹±èªã§æŒ‡ç¤º
- **project_name**:
  - ä½œæˆã—ãŸã„ã‚¢ãƒ—ãƒªã®åç§°ã‚’è‹±èªã§æŒ‡å®š

```powershell
$ python run.py --task "[description_of_your_idea]" --name "[project_name]"
```

# ç™ºæ³¨å¤±æ•—ï¼ï¼ˆTypeError: Client.__init__() got an unexpected keyword argument 'proxies'ï¼‰

## å‚è€ƒ
https://community.openai.com/t/error-with-openai-1-56-0-client-init-got-an-unexpected-keyword-argument-proxies/1040332

## åŸå› 
- httpx ã® **0.28** å»ƒæ­¢äºˆå®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ ã€Œproxiesã€ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚

## å¯¾ç­–
- httpxã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ **0.27.2** ã«ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹

```powershell
$ pip install httpx==0.27.2 
```

# ç™ºæ³¨å¤±æ•—ï¼ï¼ˆtenacity.RetryError: RetryError[<Future at 0x251f95cb310 state=finished raised RateLimitError>]ï¼‰

```Optoinal
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
```

## å‚è€ƒ
https://github.com/OpenBMB/ChatDev/issues/26
https://qiita.com/motito/items/491f7021ad6a5aa8762a

## åŸå› 

- ChatDevãŒå†…éƒ¨ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªCamelã®å•é¡Œ

## å¯¾å‡¦

- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®Camelå´ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹
### **camel/model_backend.py**
  - Importæ–‡ã®è¿½åŠ 
```python
  from tenacity import retry, wait_exponential
```
  - OpenAIModelã‚¯ãƒ©ã‚¹ã®ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã€ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®è¿½åŠ 
```python
class OpenAIModel(ModelBackend):
    r"""OpenAI API in a unified ModelBackend interface."""

    @retry(wait=wait_exponential(multiplier=1, min=4, max=10))        
    def run(self, *args, **kwargs) -> Dict[str, Any]:

```

### **camel/agents/role_playing.py**
  - Importæ–‡ã®è¿½åŠ 
```python
  from tenacity import retry, wait_exponential
```
  - ã€Œdef stepã€ã®ä¸Šã«ã€ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®è¿½åŠ 
```python
    @retry(wait=wait_exponential(multiplier=60, max=100))
    def step(
            self,
            user_msg: ChatMessage,
            assistant_only: bool,
    ) -> Tuple[ChatAgentResponse, ChatAgentResponse]:


```


# å‡¦ç†ã¯é€šã£ãŸã‚ˆã†ã«è¦‹ãˆã‚‹ãŒå¤±æ•—ã¯ç¶šãï¼ˆï¼‰
## modelæŒ‡å®šãªã—ã®å ´åˆï¼ˆ3.5ï¼‰
```json
HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
```
- exponential backoff ãŒåŠ¹ã„ã¦ãªã„ï¼Ÿ
## model "GPT_4"æŒ‡å®šã®å ´åˆ
```json
HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 404 Not Found"
```
- OpenAIäº‹ä¾‹ã‚’è¦‹ãŸã‘ã©ã€Organizationã«ã¯æ‰€å±ã—ã¦ã„ã‚‹ã¯ãšã€‚ã€‚ã€‚ï¼Ÿï¼Ÿï¼Ÿ
https://help.openai.com/en/articles/6891827-error-code-404-you-must-be-a-member-of-an-organization-to-use-the-api

ã¡ã‚‡ã£ã¨åŸå› ã‚ã‹ã‚‰ãªã„ã®ã§æ£šä¸Šã’

# ã‚µãƒ³ãƒ—ãƒ«ã®ãƒ­ã‚°ã‚’ãƒªãƒ—ãƒ¬ã‚¤ã—ã¦éŠã¶

ç”ŸæˆãŒã†ã¾ãã„ã‹ãªã„ã®ã§ã€ã‚µãƒ³ãƒ—ãƒ«ã§å‹•ä½œã‚’ã®ãã„ã¦ã¿ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚
WereHouseãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«ã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªãƒ•ã‚©ãƒ«ãƒ€ãŒãŸãã•ã‚“æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚
ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ç”Ÿæˆæ™‚ã®ãƒ­ã‚°ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã®ãƒ­ã‚°ã‚’ãƒªãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚‹ã€‚

## Viewerã‚’èµ·å‹•ã™ã‚‹

```powershell
$ python .\visualizer\app.py
Please visit http://127.0.0.1:8000/ for the front-end display page.
In the event of a port conflict, please modify the port argument (e.g., python3 app.py --port 8012).
 * Serving Flask app 'app'
 * Debug mode: off
```
## ãƒ–ãƒ©ã‚¦ã‚¶ã§ã€Œhttp://127.0.0.1:8000/ã€ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
![](/images/2025021600001/2025021603.png)

## ã€ŒReplay Visualizerã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦Viewerã‚’èµ·å‹•ã™ã‚‹
![](/images/2025021600001/2025021604.png)

## ã€ŒFile Uploadã€ã‹ã‚‰ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€ã€ŒReplayã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
![](/images/2025021600001/2025021605.png)
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®ãƒãƒ£ãƒƒãƒˆã‚„ç”Ÿæˆç‰©ã®ç”ŸæˆçŠ¶æ³ãŒå†ç”Ÿã•ã‚Œã‚‹

# æ‰€æ„Ÿ
- OpenAIã®APIã¨ã—ã¦3.5Turboã€4oã‚‚æä¾›ã•ã‚Œã¦ã‚‹ã¯ãšã ã‹ã‚‰ã€å¤šåˆ†APIã®å‘¼ã³å‡ºã—è‡ªä½“ãŒã†ã¾ãã„ã£ã¦ã„ãªã„æ„Ÿã€‚
- åˆ¥é€”ä»–ã®APIãƒ„ãƒ¼ãƒ«ã§Keyã€å‘¼ã³å‡ºã—ã®æ©Ÿèƒ½æ¤œè¨¼ã—ã¦åˆ¥æ—¥ã«ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã€‚